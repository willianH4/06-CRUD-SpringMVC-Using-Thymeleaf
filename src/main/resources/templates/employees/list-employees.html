<!DOCTYPE html>
<html lang="es" xmlns:th="http://www.thymeleaf.org" >
	<head>
		<meta charset="UTF-8">
		<title>Employee Directory - Home</title>
		 <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous">
	</head>
	
	<body>
		
		<div class="container">
			<div class="row mt-3">
				<h3>Employee Directory</h3>
				<hr>
				
				<div class="d-flex mb-3">
					 <div class="me-auto p-2" sec:authorize="hasRole('MANAGER')">
						<!--- add a button -->
						<a class="btn btn-primary btn-sm mb-3 mt-3" th:href="@{/employees/showFormAdd}">Add Employee</a>
					 </div>
			  		<div class="p-2">
						  <form th:action="@{/logout}" method="POST">
							  <input type="submit" class="btn btn-sm btn-danger" value="Logout"/>
						  </form>
					</div>
				</div>
				
				<table class="table table-bordered table-striped">
					<thead class="table-dark">
						<tr>
							<th>First Name</th>
							<th>Last Name</th>
							<th>Email</th>
							<th sec:authorize="hasRole('ADMIN')">Action</th>
						</tr>
					</thead>
					
					<tbody>
						<tr th:each="tempEmployee : ${employees}">
							<td th:text="${tempEmployee.firstName}" />
							<td th:text="${tempEmployee.lastName}" />
							<td th:text="${tempEmployee.email}" />
							<td sec:authorize="hasRole('ADMIN')">
								<a class="btn btn-info btn-sm" th:href="@{/employees/showFormForUpdate(employeeId=${tempEmployee.id})}">Update</a>
								
								<a class="btn btn-danger btn-sm" th:href="@{/employees/delete(employeeId=${tempEmployee.id})}" onclick="if(!(confirm('Are you sure you want to delete this employee?'))) return false">
									Delete
								</a>
							</td>
						</tr>
					</tbody>
				</table>
			</div>
		</div>
		
	</body>
</html>